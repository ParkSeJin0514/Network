# Network Shell Script ì‹¤ìŠµ ë¬¸ì œ
## ë¬¸ì œ í™˜ê²½ ì„¤ì •
- ì‹¤ìŠµì„ ìœ„í•´ ë‹¤ìŒ íŒŒì¼ë“¤ì„ ìƒì„±í•˜ì„¸ìš”
## 1. ë„¤íŠ¸ì›Œí¬ ë¡œê·¸ íŒŒì¼ ìƒì„±
```
cat > network.log << 'EOF'
2024-01-15 10:30:25 192.168.1.100 CONNECT success
2024-01-15 10:30:30 192.168.1.101 CONNECT failed
2024-01-15 10:31:15 192.168.1.102 CONNECT success
2024-01-15 10:31:20 192.168.1.100 DISCONNECT success
2024-01-15 10:32:10 192.168.1.103 CONNECT success
2024-01-15 10:32:15 192.168.1.101 CONNECT success
2024-01-15 10:33:25 192.168.1.104 CONNECT failed
2024-01-15 10:33:30 192.168.1.102 DISCONNECT success
EOF
```
```
##3. ì ‘ì† í†µê³„ íŒŒì¼ ìƒì„±
cat > connections.txt << 'EOF'
192.168.1.100 5
192.168.1.101 12
192.168.1.102 8
192.168.1.103 3
192.168.1.104 15
192.168.1.105 7
EOF
```
## ë¬¸ì œ 1. ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ ë¶„ì„ê¸°
- ìš”êµ¬ì‚¬í•­
```
network.log íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ ì—°ê²° ì„±ê³µ/ì‹¤íŒ¨ í†µê³„ë¥¼ ì¶œë ¥í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ ìž‘ì„±
ì „ì²´ ì—°ê²° ì‹œë„ ìˆ˜, ì„±ê³µ ìˆ˜, ì‹¤íŒ¨ ìˆ˜ë¥¼ ê³„ì‚°
ì„±ê³µë¥ ì„ ë°±ë¶„ìœ¨ë¡œ í‘œì‹œ (ì†Œìˆ˜ì  ì œê±°)
```
- ì¶œë ¥ í˜•íƒœ
```
=== ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¶„ì„ ê²°ê³¼ ===
ì „ì²´ ì—°ê²° ì‹œë„: Xê±´
ì„±ê³µ: Yê±´
ì‹¤íŒ¨: Zê±´
ì„±ê³µë¥ : W%
```
### ì œí•œì‚¬í•­
- ifë¬¸ê³¼ ë³€ìˆ˜ë§Œ ì‚¬ìš©
- grep, wc, cut ëª…ë ¹ì–´ í™œìš©
- íŒŒì¼ëª…ì€ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œ ì²« ë²ˆì§¸ ì¸ìžë¡œ ë°›ê¸°

### ðŸ”§ ì •ë‹µ
```
#!/bin/bash

V_NETLOG="network.log"
TOTAL_COUNT=$(wc -l < "$V_NETLOG")
TOTAL_SUC=$(cut -d" " -f 5 < "$V_NETLOG" | grep "success" | wc -l)
TOTAL_FAIL=$(cut -d" " -f 5 < "$V_NETLOG" | grep "failed" | wc -l)

echo "=== ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¶„ì„ ê²°ê³¼ ==="
echo "ì „ì²´ ì—°ê²° ì‹œë„: $TOTAL_COUNTê±´"
echo "ì„±ê³µ: $TOTAL_SUCê±´"
echo "ì‹¤íŒ¨: $TOTAL_FAILê±´"
```

## ë¬¸ì œ 3. ì„œë²„ ìƒíƒœ ì ê²€ ìŠ¤í¬ë¦½íŠ¸
- ìš”êµ¬ì‚¬í•­
```servers.sh ì‹¤í–‰í•´ ê° ì„œë²„ì— ëŒ€í•´ ping í…ŒìŠ¤íŠ¸ ì‹¤í–‰
ì‘ë‹µ ìžˆëŠ” ì„œë²„ì™€ ì—†ëŠ” ì„œë²„ë¥¼ êµ¬ë¶„í•˜ì—¬ ì¶œë ¥
ì‘ë‹µ ì‹œê°„ì´ 100ms ì´ìƒì¸ ì„œë²„ëŠ” "ëŠë¦¼" í‘œì‹œ
ìž…ë ¥ í˜•íƒœ:
	~$ servers.sh 123.92.0.12
ì¶œë ¥ í˜•íƒœ:
=== ì„œë²„ ìƒíƒœ ì ê²€ ê²°ê³¼ ===
[ì •ìƒ] web01 (123.92.0.12) - ì‘ë‹µì‹œê°„: XXms
OR
=== ì„œë²„ ìƒíƒœ ì ê²€ ê²°ê³¼ ===
[ì˜¤í”„ë¼ì¸] db01 (123.92.0.11) - ì‘ë‹µì—†ìŒ
...
```
### ì œí•œì‚¬í•­
- ifë¬¸ê³¼ ë³€ìˆ˜ë§Œ ì‚¬ìš©
- cut, ping ëª…ë ¹ì–´ í™œìš©
- pingì€ 1íšŒë§Œ ì‹¤í–‰ (ping -c 1)

### ðŸ”§ ì •ë‹µ

```
#!/bin/bash

V_PING="$1"
V_PING_CHECK=$(ping -c 1 "$V_PING")
V_PING_TIME=$(echo "$V_PING_CHECK" | grep "time=" | cut -d" " -f 7)

echo "=== ì„œë²„ ìƒíƒœ ì ê²€ ê²°ê³¼ ==="

if echo "$V_PING_CHECK" | grep -q "1 received"; then
        echo "[ì •ìƒ] ($V_PING) - ì‘ë‹µì‹œê°„ : "$V_PING_TIME"ms"
else
        echo "[ì˜¤í”„ë¼ì¸] ($V_PING) - ì‘ë‹µì—†ìŒ"
fi
```
```
[mk@192.168.0.100 ~/parksejin]$ source servers.sh 192.168.0.4
=== ì„œë²„ ìƒíƒœ ì ê²€ ê²°ê³¼ ===
[ì •ìƒ] (192.168.0.4) - ì‘ë‹µì‹œê°„ : time=1.11ms

[mk@192.168.0.100 ~/parksejin]$ source servers.sh 192.168.0.0
=== ì„œë²„ ìƒíƒœ ì ê²€ ê²°ê³¼ ===
[ì˜¤í”„ë¼ì¸] (192.168.0.0) - ì‘ë‹µì—†ìŒ
```